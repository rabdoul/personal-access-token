SCRIPT_DESCRIPTION


SCRIPT_AUTHOR
r.bancal

SCRIPT_GROUPS
SANITYCHECK TESTS 

SCRIPT_START

	chapter -> Step sequencing activity TEST -> Web production process -> 

	callScript -> scripts.ResetProductionRules -> [ valid-orderform-od@framboise.com , !Lectra33! ] -> 

	channel -> start -> prodprocess -> https://cutting-room-production-process.dev.mylectra.com/ -> {"overspec":{"keepSizeAndPosition":false,"fullScreen":true,"protocol":"WEB"}}

	callScript -> subscript.Login -> [ valid-orderform-od@framboise.com , !Lectra33! ] -> 

	paragraph -> Check initial state

	callScript -> subscript.activity_list.CheckActivityEnabledState -> [ analyse-product-order , false ] -> 

	callScript -> subscript.activity_list.CheckActivityEnabledState -> [ setup-sequencing , true ] -> 

	comment1 -> Check that no activity is selected at start

	check -> exists = false -> a [ data-selected = true ]

	paragraph -> Test setup sequencing activity

	callScript -> subscript.activity_list.SelectActivity -> [ setup-sequencing ] -> 

	comment1 -> Initial state : checkbox unclicked, input is not shown

	check -> exists = false -> input [ id = orders-number ]

	callScript -> subscript.IsCheckboxEmpty -> [ splitList , 0 ] -> 

	comment1 -> Edit rule : once checkbox is accepted, input appears and can be modified

	callScript -> subscript.ClickEdit -> [  ] -> 

	callScript -> subscript.ClickCheckbox -> [ splitList , 0 ] -> 

	callScript -> subscript.IsCheckboxFilled -> [ splitList , 0 ] -> 

	check -> exists = true -> input [ id = orders-number ]

	callScript -> subscript.activity_list.CheckActivityEditedState -> [ setup-sequencing , true ] -> 

	callScript -> subscript.ClickCancel -> [  ] -> 

	callScript -> subscript.activity_list.CheckActivityEditedState -> [ setup-sequencing , false ] -> 

	check -> exists = false -> input [ id = orders-number ]

	callScript -> subscript.ClickEdit -> [  ] -> 

	callScript -> subscript.ClickCheckbox -> [ splitList , 0 ] -> 

	callScript -> subscript.step_sequencing.ChangeOrderNumbers -> [ 3 ] -> 

	callScript -> subscript.activity_list.CheckActivityEditedState -> [ setup-sequencing , true ] -> 

	callScript -> subscript.ClickSave -> [  ] -> 

	callScript -> subscript.activity_list.CheckActivityEditedState -> [ setup-sequencing , false ] -> 

	paragraph -> Check error when order number field is emptied

	check -> exists = true -> input [ id = orders-number , value = 3 ]

	callScript -> subscript.ClickEdit -> [  ] -> 

	callScript -> subscript.step_sequencing.ChangeOrderNumbers -> [ a ] -> 

	check -> exists = true -> div [ data-testid = icon-error ] -> a [ data-xname = setup-sequencing ]

	check -> exists = true ->  [ data-xlabel = SAVE_PRODUCTION_PROCESS , data-enabled = disabled ]

	comment1 -> Error remains when hiding the field in error

	callScript -> subscript.ClickCheckbox -> [ splitList , 0 ] -> 

	check -> exists = true -> div [ data-testid = icon-error ] -> a [ data-xname = setup-sequencing ]

	check -> exists = true ->  [ data-xlabel = SAVE_PRODUCTION_PROCESS , data-enabled = disabled ]

	paragraph -> Teardown

	callScript -> subscript.ClickCheckbox -> [ splitList , 0 ] -> 

	callScript -> subscript.step_sequencing.ChangeOrderNumbers -> [ 5$KEY_ENTER ] -> 

	callScript -> subscript.ClickCheckbox -> [ splitList , 0 ] -> 

	callScript -> subscript.ClickSave -> [  ] -> 

	callScript -> subscript.IsCheckboxEmpty -> [ splitList , 0 ] -> 

	channel -> close -> prodprocess

	comment1 -> Test sucess !
